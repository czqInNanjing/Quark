//
//  AnswerDetailViewController.swift
//  Science_Plus
//
//  Created by Mac on 16/5/9.
//  Copyright © 2016年 Chem_Plus. All rights reserved.
//

import UIKit

/**回答详情界面*/
class AnswerDetailViewController: UIViewController {
    @IBOutlet var name :UILabel!
    @IBOutlet var introduction:UILabel!
    @IBOutlet var upNumber:UILabel!
    @IBOutlet var content:UILabel!
    @IBOutlet var date:UILabel!
    @IBOutlet var thumbnailImageView: UIImageView!
    @IBOutlet var upButton:UIButton!
    @IBOutlet var upState:UILabel!
    @IBOutlet var downButton:UIButton!
    @IBOutlet var downState:UILabel!
    @IBOutlet var markButton:UIButton!
    @IBOutlet var markState:UILabel!
    @IBOutlet var commentButton:UIButton!
    @IBOutlet var commentState:UILabel!
    
    private var answer:Answer?{
        get{
            return answerDetailModel.getAnswer()
        }
        set{
            answerDetailModel.setAnswer(newValue)
        }
    }
    private var answerDetailModel = AnswerDetailModel()
    
    private struct storyBoard {
<<<<<<< HEAD
        static let showComment="showComment"
=======
        static let showCommentSegue = "showAnswerComment"
>>>>>>> 6c14c064ebd525c2052f4b22be66950d950ebb55
    }
    
    
    override func viewDidLoad() {
        super.viewDidLoad()
        
        answerDetailModel.getAnswerDetail(answerController: self)
        
        if let answer = self.answer{
            name.text = answer.name
            
            introduction.text = answer.introduction
            
             upNumber.text = "\(answer.praiseNum ?? 0)"
            
            content.text = answer.content
            
            date.text = answer.createTime
        }
        
        
  
        
        
    }
    
    @IBAction func changeState (sender : UIButton){
        sender.selected = !sender.selected
        sender.enabled = !sender.enabled
    }
    
    @IBAction func agreeOrNot(){
//        upButton.selected = !upButton.selected
//        upState.enabled = !upState.enabled
        
    }
    
    @IBAction func helpOrNot(){
//        downButton.selected = !downButton.selected
//        downState.enabled = !downState.enabled
    }
    
    @IBAction func markOrNot(){
//        markButton.selected = !markButton.selected
//        markState.enabled = !markState.enabled
    }

    func refreshUI()  {
        if let newAnswer = answer{
            upNumber.text = "\(newAnswer.praiseNum ?? 0)"
            print(newAnswer.content)
            content.text = newAnswer.content ?? ""
            date.text = newAnswer.createTime ?? ""
            
 
            name.text = newAnswer.name
            introduction.text = newAnswer.introduction
            thumbnailImageView.image = UIImage(named: newAnswer.image ?? "")
        }
        
        
        
        
        
        
    }
    

    
    override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject?) {
<<<<<<< HEAD
        if segue.identifier == storyBoard.showComment {
            let naController = segue.destinationViewController as!
            UINavigationController
            if let commentViewController = naController.visibleViewController as? CommentViewController {
//                commentViewController.setAnswerId((self.answer?.id)!)
            }
            
        }
=======
        if let identifier = segue.identifier {
            switch identifier {
            case storyBoard.showCommentSegue:
                if let commentController = (segue.destinationViewController as? UINavigationController)?.visibleViewController as? CommentViewController {
//                    commentController.
                
                }
            default:
                break
            }
        }
        
        
        
>>>>>>> 6c14c064ebd525c2052f4b22be66950d950ebb55
    }
    
    func setAnswer(answer:Answer?)  {
        self.answer = answer
    }
    

}
